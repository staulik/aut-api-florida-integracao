// Extrai o valor do campo "id" do response
const idValue = pm.response.json().content[0].id;
// Salva o valor em uma variável de ambiente chamada "idPessoa"
pm.environment.set("idPessoa", idValue.toString());
// Exibe o valor da variável no console do Postman
console.log("Valor da variável idPessoa:", pm.environment.get("idPessoa"));

pm.test("Status code is 200", function () {
        pm.response.to.have.status(200);
   });

   pm.test("A resposta é valida e deve ter um corpo", function () {
        pm.response.to.be.ok;
        pm.response.to.be.withBody;
        pm.response.to.be.json;
    });

pm.test("Valida a estrutura do corpo", function () {
    const schema = pm.variables.get("schema");
  pm.response.to.have.jsonSchema(schema);
});

pm.test("Valida que o campo id não pode ser vazio", function () {
       const resp = pm.response.json()
       pm.expect(resp.content[0].id).not.to.equal("");  
 });

pm.test("Valida que o campo id não pode ser nulo", function () {
       const resp = pm.response.json()
       pm.expect(resp.content[0].id).not.equal(null);   
});

pm.test("Validar o valor do query param com o valor cpf do response", function () {
        const str = pm.request.url.getQueryString();
        let arr = str.split("=")
        const res = pm.response.json()
        pm.expect(res.content[0].cpf).to.equal(arr[1]); 
        console.log("valor", arr[1]);   
}); 